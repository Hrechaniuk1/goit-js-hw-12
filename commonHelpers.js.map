{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const gallery = document.querySelector(\".gallery\")\n\nfunction doMarkUp(data) {\n        const markUp = data.hits.map(a =>\n        `<li class=\"gallery-item\" data-id=\"${a.id}\">\n        <div class=\"img-container\" >\n        <a class=\"large-image\" href=\"${a.largeImageURL}\">\n        <img class=\"image\" src=\"${a.webformatURL}\" alt=\"${a.tags}\">\n        </a> \n        </div>\n        <ul class=\"description-list\" >\n          <li class=\"description-item\"><p>Likes</p><p>${a.likes}</p></li>\n          <li class=\"description-item\"><p>Views</p><p>${a.views}</p></li>\n          <li class=\"description-item\"><p>Comments</p><p>${a.comments}</p></li>\n          <li class=\"description-item\"><p>Downloads</p><p>${a.downloads}</p></li>\n        </ul>\n      </li>`).join(\"\")\n    gallery.insertAdjacentHTML(\"beforeend\", markUp)\n}\n                \nexport default doMarkUp          ","import doMarkUp from \"./render-functions.js\"\nimport SimpleLightbox from \"simplelightbox\"\nimport iziToast from \"izitoast\";\nimport axios from \"axios\";\n\n// =============================================================================\n\nconst loader = document.querySelector(\".loader\")\nconst imgPerOneTime = 15 \nlet imgAmount\nconst totalPages = Math.ceil(imgAmount / imgPerOneTime)\nlet page = 1\nlet searchWord\n\n// =============================================================================\n\nasync function requestForImgs (event) {\n    searchWord = event.target.elements.search.value.trim()\n    page = 1\n    try { \n         loader.classList.remove(\"is-hidden\")\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n             params: {\n                 key: \"42614843-af27c28624474ca020601ef6c\",\n                 q: searchWord,\n                 image_type: \"photo\",\n                 orientation: \"horizontal\",\n                 safesearch: \"true\",\n                 per_page: 15,\n                 page,\n             }\n        })\n        if (response.data.hits.length === 0) {\n             iziToast.show({ message: \"Sorry, there are no images matching your search query. Please try again!\", backgroundColor: \"red\", messageColor: \"white\", position: \"topCenter\" })\n         } else {\n             doMarkUp(response.data)\n             document.querySelector(\".more-btn\").classList.remove(\"is-hidden\")\n        }\n        loader.classList.add(\"is-hidden\")\n         const lightbox = new SimpleLightbox(\".large-image\", { captionDelay: 250, captionsData: \"alt\", })\n         lightbox.refresh()\n    } catch {\n        iziToast.show({ message: \"Sorry, something goes wrong!\", backgroundColor: \"red\", messageColor: \"white\", position: \"topCenter\" })\n    }\n}\n\nexport async function showMoreImgs(event) {\n    page += 1\n    try { \n        loader.classList.remove(\"is-hidden\")\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n             params: {\n                 key: \"42614843-af27c28624474ca020601ef6c\",\n                 q: searchWord,\n                 image_type: \"photo\",\n                 orientation: \"horizontal\",\n                 safesearch: \"true\",\n                 per_page: 15,\n                 page,\n             }\n        })\n        if (response.data.hits.length === 0) {\n             iziToast.show({ message: \"Sorry, there are no images matching your search query. Please try again!\", backgroundColor: \"red\", messageColor: \"white\", position: \"topCenter\" })\n         } else {\n            doMarkUp(response.data)\n            if (totalPages <= page) {\n                     document.querySelector(\".more-btn\").classList.add(\"is-hidden\")\n                     iziToast.show({ message: \"We're sorry, but you've reached the end of search results.\", backgroundColor: \"red\", messageColor: \"white\", position: \"topCenter\" })\n                 }\n                scrollByImg()\n             \n         }\n         loader.classList.add(\"is-hidden\")\n         const lightbox = new SimpleLightbox(\".large-image\", { captionDelay: 250, captionsData: \"alt\", })\n         lightbox.refresh()\n    } catch {\n        \n    }\n}\n\nfunction scrollByImg() {\nconst item = document.querySelector(\".gallery-item\")\nconst itemHight = item?.getBoundingClientRect().height\nwindow.scrollBy({\n    top: (itemHight * 2),\n    left: 0,\n        behavior: \"smooth\",\n    });\n}\n\n// const requestForImgs = async (event) => {\n//     let keyWord\n//     if (event.target === document.querySelector(\".more-btn\")) {\n//         keyWord = searchWord\n//         page += 1\n//     } else {\n//         searchWord = event.target.elements.search.value.trim()\n//         keyWord = searchWord\n//         page = 1\n//     }\n//     const loader = document.querySelector(\".loader\")\n//     try {\n//          loader.classList.remove(\"is-hidden\")\n//          const response = await axios.get(\"https://pixabay.com/api/\", {\n//              params: {\n//                  key: \"42614843-af27c28624474ca020601ef6c\",\n//                  q: keyWord,\n//                  image_type: \"photo\",\n//                  orientation: \"horizontal\",\n//                  safesearch: \"true\",\n//                  per_page: 15,\n//                  page,\n//              }\n//          })\n//          if (response.data.hits.length === 0) {\n//              iziToast.show({ message: \"Sorry, there are no images matching your search query. Please try again!\", backgroundColor: \"red\", messageColor: \"white\", position: \"topCenter\" })\n//          } else {\n//              doMarkUp(response.data)\n//              document.querySelector(\".more-btn\").classList.remove(\"is-hidden\")\n//              if (event.target === document.querySelector(\".more-btn\")) {\n//                 const imgPerOneTime = 15\n//                 let imgAmount = response.data.totalHits\n//                  const totalPages = Math.ceil(imgAmount / imgPerOneTime)\n//                  if (totalPages <= page) {\n//                      document.querySelector(\".more-btn\").classList.add(\"is-hidden\")\n//                      iziToast.show({ message: \"We're sorry, but you've reached the end of search results.\", backgroundColor: \"red\", messageColor: \"white\", position: \"topCenter\" })\n//                  }\n//                  const item = document.querySelector(\".gallery-item\")\n//                     const itemHight = item.getBoundingClientRect().height\n//                     window.scrollBy({\n//                         top: (itemHight * 2),\n//                         left: 0,\n//                         behavior: \"smooth\",\n//                         });\n//              }\n//          }\n//          loader.classList.add(\"is-hidden\")\n//          const lightbox = new SimpleLightbox(\".large-image\", { captionDelay: 250, captionsData: \"alt\", })\n//          lightbox.refresh()\n//      } catch (error) {\n//          iziToast.show({ message: \"Sorry, something goes wrong!\", backgroundColor: \"red\", messageColor: \"white\", position: \"topCenter\" })\n//      }\n// }\n\n// =============================================================================\n\nexport default requestForImgs","import requestForImgs from \"./js/pixabay-api.js\"\nimport iziToast from \"izitoast\";\nimport { showMoreImgs } from \"./js/pixabay-api.js\";\n\n// =============================================================================\n\nconst form = document.querySelector(\".form\")\nconst moreBtn = document.querySelector(\".more-btn\")\n\n// =============================================================================\n\nform.addEventListener(\"submit\", doSearch)\nmoreBtn.addEventListener(\"click\", showMoreImgsBtn)\n\n// =============================================================================\n\nfunction doSearch(event) {\n    event.preventDefault()\n    if (event.target.elements.search.value === \"\") {\n         iziToast.show({message: \"You have to text something\", backgroundColor: \"red\", messageColor: \"white\", position: \"topCenter\"})\n    } else {\n            document.querySelector(\".gallery\").innerHTML = \"\"\n            requestForImgs(event)\n    }\n    form.reset()\n}\n\n\nfunction showMoreImgsBtn(event) {\n    showMoreImgs(event)\n}"],"names":["gallery","doMarkUp","data","markUp","a","loader","imgPerOneTime","imgAmount","totalPages","page","searchWord","requestForImgs","event","response","axios","iziToast","SimpleLightbox","showMoreImgs","scrollByImg","item","itemHight","form","moreBtn","doSearch","showMoreImgsBtn"],"mappings":"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"}